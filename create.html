<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>URL Downloader</title>
</head>
<body>

<h1>URL Downloader</h1>

<form id="urlForm">
  <label for="urlInput">Enter URL:</label><br>
  <input type="text" id="urlInput" name="urlInput"><br><br>
  <button type="button" onclick="downloadTxt()">Continue</button>
</form>

<div id="uploadSection" style="display:none;">
  <h2>Create .app</h2>
  <input type="file" id="fileInput" accept=".txt"><br><br>
  <label for="appNameInput">Enter .app name:</label><br>
  <input type="text" id="appNameInput" name="appNameInput"><br><br>
  <button type="button" onclick="createApp()">Continue</button>
</div>

<script>
function downloadTxt() {
  var url = document.getElementById("urlInput").value;
  var filename = "app.txt";
  var fileContent = "Downloaded URL: " + url;
  
  var blob = new Blob([fileContent], {type: "text/plain;charset=utf-8"});
  var downloadLink = document.createElement("a");
  downloadLink.href = URL.createObjectURL(blob);
  downloadLink.download = filename;
  downloadLink.click();
  
  document.getElementById("urlForm").style.display = "none";
  document.getElementById("uploadSection").style.display = "block";
}

function createApp() {
  var fileInput = document.getElementById("fileInput");
  if (fileInput.files.length === 0) {
    alert("Please select a file to upload.");
    return;
  }
  
  var appName = document.getElementById("appNameInput").value;
  var uploadedFile = fileInput.files[0];
  if (uploadedFile.name !== "app.txt") {
    alert("Uploaded file must be named app.txt.");
    return;
  }
  
  var newFilename = appName + ".app";
  var blob = new Blob([uploadedFile], {type: "application/octet-stream"});
  var downloadLink = document.createElement("a");
  downloadLink.href = URL.createObjectURL(blob);
  downloadLink.download = newFilename;
  downloadLink.click();
}
</script>

</body>
</html>